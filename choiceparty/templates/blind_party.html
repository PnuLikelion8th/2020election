{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="{% static 'css/blind_party.css' %}">
</head>
<body> 
    <div class="party_container">
        {%if msg != None %}
        {{msg}}
        {% endif %}
        <h1>나는..
         
        </h1>

        <section class="choice_container">

            {%if all_party.all|length == 1 %}

            끝!!!
                {%for i in all_party%}
                {{i}}
                {%endfor%}
            {%else%}
            <form method = "POST">
                {%csrf_token%}

                <input type="hidden" name="unearned" value={{unearned}}>
                
                <article class="top">
                    {%for i in top %}
                        <input onchange="hide()" type="radio" name="party{{forloop.counter}}" value={{i}} id="party_t_{{forloop.counter}}">
                        <label for="party_t_{{forloop.counter}}" class="card card{{forloop.counter}}">{{forloop.counter}}{{i}}</label>
                        
                    {%endfor%}
                </article>


                <div class="divider_line"> VS </div>

                <article class="bottom">
                    {%for i in bottom %}
                        <input onchange="hide()" type="radio" name="party{{forloop.counter}}" value={{i}} id="party_b_{{forloop.counter}}">
                        <label for="party_b_{{forloop.counter}}" class="card card{{forloop.counter}}" >{{forloop.counter}}{{i}}</label>

                    {%endfor%}

                </article>



                <button type="submit">제출</button>


            </form>
            {%endif%}
        </section>
        <div>
            TOP:
            {%for i in top %}
                {{i}}
            
            {%endfor%}
        </div>
        <div>
            BOTTOM:
            {%for i in bottom %}
            {{i}}
        
            {%endfor%}
        </div>
    </div>
</body>
<script>
   
    function hide(){
        cho_list = document.querySelectorAll('.' + this.event.target.nextSibling.nextSibling.classList[1])
        
        //min width줄여서 애니메이션 효과 들어가도록 제작
        cho_list[0].classList.add('zero_width')
        cho_list[1].classList.add('zero_width')
        //클릭하면 해당 div 내 text제거되게함
        cho_list[0].innerHTML = ""
        cho_list[1].innerHTML = ""


        if  (this.event.target.innerHTML === document.querySelector('.top label:last-child').innerHTML){
            document.querySelector('.choice_container > form').submit()
        }

    }

    
</script>
</html>